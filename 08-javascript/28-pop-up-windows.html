<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Runner</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: radial-gradient(ellipse at center, #0c0c2e 0%, #000000 100%);
            font-family: 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #00ff88;
            overflow: hidden;
        }

        .game-container {
            position: relative;
            width: 900px;
            height: 600px;
            background: linear-gradient(90deg, #0a0a2e 0%, #16213e 50%, #0a0a2e 100%);
            border: 3px solid #00ff88;
            border-radius: 10px;
            box-shadow: 
                0 0 20px rgba(0, 255, 136, 0.3),
                inset 0 0 20px rgba(0, 255, 136, 0.1);
            overflow: hidden;
        }

        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent),
                radial-gradient(2px 2px at 160px 30px, #fff, transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: starMove 20s linear infinite;
        }

        @keyframes starMove {
            from { transform: translateX(0); }
            to { transform: translateX(-200px); }
        }

        .ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 10px;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.8);
        }

        .score, .fuel, .lives {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .fuel-bar {
            width: 100px;
            height: 10px;
            background: rgba(255, 0, 0, 0.3);
            border: 1px solid #00ff88;
            border-radius: 5px;
            overflow: hidden;
        }

        .fuel-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444, #ffaa00, #00ff00);
            width: 100%;
            transition: width 0.3s ease;
        }

        .player {
            position: absolute;
            left: 50px;
            top: 275px;
            width: 80px;
            height: 50px;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            clip-path: polygon(0% 50%, 20% 0%, 80% 0%, 100% 50%, 80% 100%, 20% 100%);
            box-shadow: 
                0 0 15px rgba(0, 255, 136, 0.6),
                inset 0 0 10px rgba(255, 255, 255, 0.2);
            transition: top 0.15s ease;
            z-index: 10;
        }

        .player::after {
            content: '';
            position: absolute;
            left: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 8px;
            background: linear-gradient(90deg, transparent, #00aaff, #ffffff);
            border-radius: 4px;
            animation: thrust 0.1s ease-in-out infinite alternate;
        }

        @keyframes thrust {
            from { transform: translateY(-50%) scaleX(0.8); opacity: 0.8; }
            to { transform: translateY(-50%) scaleX(1.2); opacity: 1; }
        }

        .obstacle {
            position: absolute;
            background: radial-gradient(circle, #8B4513, #654321, #2F1B14);
            border-radius: 50%;
            box-shadow: 
                0 0 10px rgba(139, 69, 19, 0.8),
                inset -10px -10px 20px rgba(0, 0, 0, 0.5),
                inset 10px 10px 20px rgba(255, 255, 255, 0.1);
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .fuel-pickup {
            position: absolute;
            width: 30px;
            height: 40px;
            background: linear-gradient(180deg, #00ff00, #00aa00);
            border-radius: 15px 15px 5px 5px;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
            animation: pulse 1.5s ease-in-out infinite;
        }

        .fuel-pickup::before {
            content: 'F';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 16px;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(5deg); }
        }

        .explosion {
            position: absolute;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #ff4444, #ff8800, transparent);
            border-radius: 50%;
            animation: explode 0.5s ease-out;
            pointer-events: none;
        }

        @keyframes explode {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(3); opacity: 0; }
        }

        .game-over, .pause-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00ff88;
            color: #00ff88;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            display: none;
            z-index: 1000;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
        }

        .game-over h2, .pause-screen h2 {
            font-size: 32px;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.8);
        }

        .game-over p, .pause-screen p {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .btn {
            background: linear-gradient(45deg, #00ff88, #0088ff);
            color: #000;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 136, 0.5);
        }

        .instructions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ff88;
            padding: 15px;
            border-radius: 10px;
            font-size: 12px;
            color: #00ff88;
        }

        .warning {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 0, 0, 0.2);
            border: 2px solid #ff0000;
            color: #ff0000;
            padding: 20px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            display: none;
            animation: blink 1s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="stars"></div>
        
        <div class="ui">
            <div class="score">PUNTOS: <span id="score">0</span></div>
            <div class="fuel">
                COMBUSTIBLE: 
                <div class="fuel-bar">
                    <div class="fuel-fill" id="fuelFill"></div>
                </div>
            </div>
            <div class="lives">VIDAS: <span id="lives">3</span></div>
        </div>

        <div class="player" id="player"></div>

        <div class="warning" id="warning">
            Â¡COMBUSTIBLE BAJO!
        </div>

        <div class="game-over" id="gameOver">
            <h2>JUEGO TERMINADO</h2>
            <p>PuntuaciÃ³n Final: <span id="finalScore">0</span></p>
            <p>Distancia Recorrida: <span id="distance">0</span>m</p>
            <button class="btn" onclick="restartGame()">REINICIAR</button>
        </div>

        <div class="pause-screen" id="pauseScreen">
            <h2>JUEGO PAUSADO</h2>
            <p>Presiona ESPACIO para continuar</p>
        </div>

        <div class="instructions">
            <strong>CONTROLES:</strong><br>
            â†‘ â†“ - Mover nave<br>
            ESPACIO - Pausar<br>
            <br>
            <strong>OBJETIVO:</strong><br>
            ðŸ”µ Evita asteroides<br>
            ðŸŸ¢ Recoge combustible<br>
            âš¡ Sobrevive el mayor tiempo posible
        </div>
    </div>

    <script>
        // Variables del juego
        let gameState = {
            running: false,
            paused: false,
            score: 0,
            fuel: 100,
            lives: 3,
            distance: 0,
            playerY: 275,
            speed: 2,
            obstacles: [],
            fuelPickups: [],
            gameTime: 0
        };

        // Referencias DOM
        const player = document.getElementById('player');
        const scoreElement = document.getElementById('score');
        const fuelElement = document.getElementById('fuelFill');
        const livesElement = document.getElementById('lives');
        const gameOverScreen = document.getElementById('gameOver');
        const pauseScreen = document.getElementById('pauseScreen');
        const finalScoreElement = document.getElementById('finalScore');
        const distanceElement = document.getElementById('distance');
        const warningElement = document.getElementById('warning');
        const gameContainer = document.querySelector('.game-container');

        // Eventos de teclado
        let keys = {};
        
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            
            if (e.key === ' ') {
                e.preventDefault();
                if (gameState.running) {
                    togglePause();
                }
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // FunciÃ³n para manejar el movimiento del jugador
        function handlePlayerMovement() {
            if (!gameState.running || gameState.paused) return;

            const moveSpeed = 5;
            
            if (keys['ArrowUp'] && gameState.playerY > 0) {
                gameState.playerY = Math.max(0, gameState.playerY - moveSpeed);
            }
            if (keys['ArrowDown'] && gameState.playerY < 550) {
                gameState.playerY = Math.min(550, gameState.playerY + moveSpeed);
            }
            
            player.style.top = gameState.playerY + 'px';
        }

        // Crear obstÃ¡culos
        function createObstacle() {
            if (!gameState.running || gameState.paused) return;

            const obstacle = document.createElement('div');
            obstacle.className = 'obstacle';
            
            const size = 30 + Math.random() * 40; // TamaÃ±o entre 30-70px
            obstacle.style.width = size + 'px';
            obstacle.style.height = size + 'px';
            obstacle.style.right = '-50px';
            obstacle.style.top = Math.random() * (600 - size) + 'px';
            
            gameContainer.appendChild(obstacle);
            gameState.obstacles.push({
                element: obstacle,
                x: 900,
                y: parseInt(obstacle.style.top),
                size: size
            });
        }

        // Crear combustible
        function createFuelPickup() {
            if (!gameState.running || gameState.paused) return;

            const fuel = document.createElement('div');
            fuel.className = 'fuel-pickup';
            fuel.style.right = '-40px';
            fuel.style.top = Math.random() * (600 - 40) + 'px';
            
            gameContainer.appendChild(fuel);
            gameState.fuelPickups.push({
                element: fuel,
                x: 900,
                y: parseInt(fuel.style.top)
            });
        }

        // Actualizar obstÃ¡culos y combustible
        function updateObjects() {
            if (!gameState.running || gameState.paused) return;

            // Actualizar obstÃ¡culos
            gameState.obstacles.forEach((obstacle, index) => {
                obstacle.x -= gameState.speed;
                obstacle.element.style.right = (900 - obstacle.x) + 'px';

                // Verificar colisiÃ³n
                if (checkCollision(obstacle, 'obstacle')) {
                    createExplosion(obstacle.x, obstacle.y);
                    takeDamage();
                    obstacle.element.remove();
                    gameState.obstacles.splice(index, 1);
                    return;
                }

                // Remover si sale de pantalla
                if (obstacle.x < -50) {
                    obstacle.element.remove();
                    gameState.obstacles.splice(index, 1);
                    gameState.score += 10; // Puntos por esquivar
                }
            });

            // Actualizar combustible
            gameState.fuelPickups.forEach((fuel, index) => {
                fuel.x -= gameState.speed;
                fuel.element.style.right = (900 - fuel.x) + 'px';

                // Verificar colisiÃ³n
                if (checkCollision(fuel, 'fuel')) {
                    gameState.fuel = Math.min(100, gameState.fuel + 25);
                    gameState.score += 50;
                    fuel.element.remove();
                    gameState.fuelPickups.splice(index, 1);
                    return;
                }

                // Remover si sale de pantalla
                if (fuel.x < -40) {
                    fuel.element.remove();
                    gameState.fuelPickups.splice(index, 1);
                }
            });
        }

        // Verificar colisiones
        function checkCollision(obj, type) {
            const playerRect = {
                x: 50,
                y: gameState.playerY,
                width: 80,
                height: 50
            };

            const objRect = {
                x: obj.x,
                y: obj.y,
                width: type === 'obstacle' ? obj.size : 30,
                height: type === 'obstacle' ? obj.size : 40
            };

            return playerRect.x < objRect.x + objRect.width &&
                   playerRect.x + playerRect.width > objRect.x &&
                   playerRect.y < objRect.y + objRect.height &&
                   playerRect.y + playerRect.height > objRect.y;
        }

        // Crear explosiÃ³n
        function createExplosion(x, y) {
            const explosion = document.createElement('div');
            explosion.className = 'explosion';
            explosion.style.left = x + 'px';
            explosion.style.top = y + 'px';
            gameContainer.appendChild(explosion);

            setTimeout(() => {
                explosion.remove();
            }, 500);
        }

        // Recibir daÃ±o
        function takeDamage() {
            gameState.lives--;
            gameState.fuel = Math.max(0, gameState.fuel - 20);
            
            // Efecto visual de daÃ±o
            player.style.filter = 'brightness(2) saturate(0)';
            setTimeout(() => {
                player.style.filter = 'none';
            }, 200);

            if (gameState.lives <= 0) {
                endGame();
            }
        }

        // Actualizar combustible y UI
        function updateGameState() {
            if (!gameState.running || gameState.paused) return;

            // Consumir combustible
            gameState.fuel -= 0.15;
            if (gameState.fuel <= 0) {
                endGame();
                return;
            }

            // Mostrar advertencia de combustible bajo
            if (gameState.fuel < 20) {
                warningElement.style.display = 'block';
            } else {
                warningElement.style.display = 'none';
            }

            // Aumentar velocidad gradualmente
            gameState.speed = Math.min(6, 2 + gameState.gameTime / 1000);
            
            // Actualizar distancia
            gameState.distance += gameState.speed / 10;
            gameState.gameTime++;

            // Actualizar UI
            scoreElement.textContent = Math.floor(gameState.score);
            fuelElement.style.width = gameState.fuel + '%';
            livesElement.textContent = gameState.lives;
        }

        // Pausar/despausar
        function togglePause() {
            gameState.paused = !gameState.paused;
            pauseScreen.style.display = gameState.paused ? 'block' : 'none';
        }

        // Terminar juego
        function endGame() {
            gameState.running = false;
            finalScoreElement.textContent = Math.floor(gameState.score);
            distanceElement.textContent = Math.floor(gameState.distance);
            gameOverScreen.style.display = 'block';
            warningElement.style.display = 'none';

            // Limpiar objetos
            gameState.obstacles.forEach(obs => obs.element.remove());
            gameState.fuelPickups.forEach(fuel => fuel.element.remove());
            gameState.obstacles = [];
            gameState.fuelPickups = [];
        }

        // Reiniciar juego
        function restartGame() {
            gameState = {
                running: true,
                paused: false,
                score: 0,
                fuel: 100,
                lives: 3,
                distance: 0,
                playerY: 275,
                speed: 2,
                obstacles: [],
                fuelPickups: [],
                gameTime: 0
            };

            player.style.top = gameState.playerY + 'px';
            gameOverScreen.style.display = 'none';
            pauseScreen.style.display = 'none';
            warningElement.style.display = 'none';

            // Limpiar objetos existentes
            document.querySelectorAll('.obstacle, .fuel-pickup, .explosion').forEach(el => el.remove());

            startGame();
        }

        // Bucle principal del juego
        function gameLoop() {
            handlePlayerMovement();
            updateObjects();
            updateGameState();
            requestAnimationFrame(gameLoop);
        }

        // Iniciar el juego
        function startGame() {
            gameState.running = true;

            // Crear obstÃ¡culos
            const obstacleInterval = setInterval(() => {
                if (!gameState.running) {
                    clearInterval(obstacleInterval);
                    return;
                }
                if (Math.random() < 0.7) { // 70% de probabilidad
                    createObstacle();
                }
            }, 1500);

            // Crear combustible
            const fuelInterval = setInterval(() => {
                if (!gameState.running) {
                    clearInterval(fuelInterval);
                    return;
                }
                if (Math.random() < 0.3) { // 30% de probabilidad
                    createFuelPickup();
                }
            }, 3000);

            // Iniciar bucle principal
            gameLoop();
        }

        // Inicializar el juego
        startGame();
    </script>
</body>
</html>