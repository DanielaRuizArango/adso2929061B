<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Atrapar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
        }

        .game-container {
            position: relative;
            width: 800px;
            height: 600px;
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 100%);
            border: 4px solid #fff;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            display: flex;
            gap: 30px;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .score {
            color: #FFD700;
        }

        .time {
            color: #FF6B6B;
        }

        .player {
            position: absolute;
            bottom: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            border-radius: 50%;
            border: 3px solid #fff;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: left 0.1s ease;
            z-index: 10;
        }

        .player::before {
            content: 'üòä';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
        }

        .falling-object {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #fff;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            transition: top 0.05s linear;
        }

        .star {
            background: linear-gradient(45deg, #FFD700, #FFA500);
        }

        .star::before {
            content: '‚≠ê';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
        }

        .bomb {
            background: linear-gradient(45deg, #8B0000, #FF0000);
        }

        .bomb::before {
            content: 'üí£';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            display: none;
            z-index: 1000;
        }

        .game-over h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #FF6B6B;
        }

        .game-over p {
            font-size: 20px;
            margin-bottom: 30px;
        }

        .restart-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .restart-btn:hover {
            transform: scale(1.05);
        }

        .instructions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .caught {
            animation: pulse 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="ui">
            <div class="score">Puntos: <span id="score">0</span></div>
            <div class="time">Tiempo: <span id="time">60</span>s</div>
        </div>

        <div class="player" id="player"></div>

        <div class="game-over" id="gameOver">
            <h2>¬°Juego Terminado!</h2>
            <p>Puntuaci√≥n final: <span id="finalScore">0</span></p>
            <button class="restart-btn" onclick="restartGame()">Jugar de Nuevo</button>
        </div>

        <div class="instructions">
            <strong>Instrucciones:</strong><br>
            ‚Üê ‚Üí Mover jugador<br>
            ‚≠ê +10 puntos<br>
            üí£ -20 puntos
        </div>
    </div>

    <script>
        // Variables del juego
        let score = 0;
        let timeLeft = 60;
        let gameRunning = true;
        let playerPosition = 370; // Posici√≥n inicial centrada
        let fallingObjects = [];
        let gameSpeed = 2;

        // Referencias DOM
        const player = document.getElementById('player');
        const scoreElement = document.getElementById('score');
        const timeElement = document.getElementById('time');
        const gameOverScreen = document.getElementById('gameOver');
        const finalScoreElement = document.getElementById('finalScore');
        const gameContainer = document.querySelector('.game-container');

        // Configurar posici√≥n inicial del jugador
        player.style.left = playerPosition + 'px';

        // Eventos de teclado
        document.addEventListener('keydown', handleKeyPress);

        function handleKeyPress(event) {
            if (!gameRunning) return;

            const containerWidth = 800;
            const playerWidth = 60;
            const moveSpeed = 20;

            switch(event.key) {
                case 'ArrowLeft':
                    event.preventDefault();
                    if (playerPosition > 0) {
                        playerPosition = Math.max(0, playerPosition - moveSpeed);
                        player.style.left = playerPosition + 'px';
                    }
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    if (playerPosition < containerWidth - playerWidth) {
                        playerPosition = Math.min(containerWidth - playerWidth, playerPosition + moveSpeed);
                        player.style.left = playerPosition + 'px';
                    }
                    break;
            }
        }

        // Crear objetos que caen
        function createFallingObject() {
            if (!gameRunning) return;

            const obj = document.createElement('div');
            obj.className = 'falling-object';
            
            // 70% estrellas, 30% bombas
            const isStar = Math.random() < 0.7;
            obj.classList.add(isStar ? 'star' : 'bomb');
            obj.dataset.type = isStar ? 'star' : 'bomb';
            
            // Posici√≥n aleatoria horizontal
            const maxX = 800 - 40; // Ancho del contenedor - ancho del objeto
            obj.style.left = Math.random() * maxX + 'px';
            obj.style.top = '0px';
            
            gameContainer.appendChild(obj);
            fallingObjects.push({
                element: obj,
                x: parseInt(obj.style.left),
                y: 0,
                type: isStar ? 'star' : 'bomb'
            });
        }

        // Mover objetos que caen
        function updateFallingObjects() {
            if (!gameRunning) return;

            fallingObjects.forEach((obj, index) => {
                obj.y += gameSpeed;
                obj.element.style.top = obj.y + 'px';

                // Verificar colisi√≥n con el jugador
                if (checkCollision(obj)) {
                    handleCollision(obj);
                    obj.element.remove();
                    fallingObjects.splice(index, 1);
                    return;
                }

                // Remover objetos que salieron de la pantalla
                if (obj.y > 600) {
                    obj.element.remove();
                    fallingObjects.splice(index, 1);
                }
            });
        }

        // Verificar colisi√≥n
        function checkCollision(obj) {
            const playerRect = {
                x: playerPosition,
                y: 520, // Posici√≥n Y del jugador
                width: 60,
                height: 60
            };

            const objRect = {
                x: obj.x,
                y: obj.y,
                width: 40,
                height: 40
            };

            return playerRect.x < objRect.x + objRect.width &&
                   playerRect.x + playerRect.width > objRect.x &&
                   playerRect.y < objRect.y + objRect.height &&
                   playerRect.y + playerRect.height > objRect.y;
        }

        // Manejar colisi√≥n
        function handleCollision(obj) {
            if (obj.type === 'star') {
                score += 10;
                player.classList.add('caught');
                setTimeout(() => player.classList.remove('caught'), 300);
            } else if (obj.type === 'bomb') {
                score = Math.max(0, score - 20);
                // Efecto visual de da√±o
                player.style.background = 'linear-gradient(45deg, #FF0000, #8B0000)';
                setTimeout(() => {
                    player.style.background = 'linear-gradient(45deg, #FF6B6B, #FF8E53)';
                }, 200);
            }
            updateScore();
        }

        // Actualizar puntuaci√≥n
        function updateScore() {
            scoreElement.textContent = score;
        }

        // Actualizar tiempo
        function updateTime() {
            if (!gameRunning) return;
            
            timeLeft--;
            timeElement.textContent = timeLeft;
            
            if (timeLeft <= 0) {
                endGame();
            }
        }

        // Incrementar dificultad
        function increaseDifficulty() {
            if (gameSpeed < 5) {
                gameSpeed += 0.5;
            }
        }

        // Terminar juego
        function endGame() {
            gameRunning = false;
            finalScoreElement.textContent = score;
            gameOverScreen.style.display = 'block';
            
            // Limpiar objetos restantes
            fallingObjects.forEach(obj => obj.element.remove());
            fallingObjects = [];
        }

        // Reiniciar juego
        function restartGame() {
            score = 0;
            timeLeft = 60;
            gameRunning = true;
            playerPosition = 370;
            gameSpeed = 2;
            fallingObjects = [];

            updateScore();
            timeElement.textContent = timeLeft;
            player.style.left = playerPosition + 'px';
            gameOverScreen.style.display = 'none';

            // Limpiar objetos existentes
            document.querySelectorAll('.falling-object').forEach(obj => obj.remove());

            // Reiniciar intervalos
            startGame();
        }

        // Iniciar juego
        function startGame() {
            // Crear objetos que caen cada 1.5 segundos
            const objectInterval = setInterval(() => {
                if (!gameRunning) {
                    clearInterval(objectInterval);
                    return;
                }
                createFallingObject();
            }, 1500);

            // Actualizar posici√≥n de objetos cada 50ms
            const moveInterval = setInterval(() => {
                if (!gameRunning) {
                    clearInterval(moveInterval);
                    return;
                }
                updateFallingObjects();
            }, 50);

            // Actualizar tiempo cada segundo
            const timeInterval = setInterval(() => {
                if (!gameRunning) {
                    clearInterval(timeInterval);
                    return;
                }
                updateTime();
            }, 1000);

            // Incrementar dificultad cada 10 segundos
            const difficultyInterval = setInterval(() => {
                if (!gameRunning) {
                    clearInterval(difficultyInterval);
                    return;
                }
                increaseDifficulty();
            }, 10000);
        }

        // Iniciar el juego cuando se carga la p√°gina
        startGame();
    </script>
</body>
</html>